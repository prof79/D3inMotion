<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <title>Shopping App</title>
    
    <style type="text/css">
    
        h1, h2, h3, h4, h5, p, div, span
        {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        svg text
        {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-size: 32pt;
        }

    </style>

</head>

<body>
    
    <h1>Shopping App</h1>

    <svg width="500" height="960"></svg>

    <script src="https://d3js.org/d3.v4.min.js"></script>

    <script>
    
        const margin = { left: 50, top: 50, right: 20, bottom: 50 };

        const svg =
            d3
            .select('svg');

        const width = +svg.attr('width');
        const height = +svg.attr('height');
        const innerWidth = width - margin.left - margin.right;
        const innerHeight = height - margin.top - margin.bottom;

        const g =
            svg
            .append('g')
            .attr('transform', function (d) {
                return 'translate(' + margin.left + ' ' + margin.top + ')';
            });

        // Vertical spacing for item text.
        const verticalSpacing = 56;

        // Nicely format a grocery item.
        const textValue = function (d) {
            return d.name + ' $' + d.price;
        }

        const render = function (selection, data) {

            selection
                .selectAll('text')
                .data(data)
                .enter()
                .append('text')
                .text(textValue)
                .attr('y', function (d, i) {
                    return verticalSpacing * i;
                });
        }

        // Groceries
        const shoppingCart = [
          { name: 'Milk', price: 3 } 
        ];

        render(g, shoppingCart);

        // Push a new item onto the list after 2 seconds.
        setTimeout( function () {
            
            shoppingCart.push(
                { name: 'Eggs', price: 20 }
            );

            render(g, shoppingCart);
        }
        , 2000);

    </script>

</body>

</html>
